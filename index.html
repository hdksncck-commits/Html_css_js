<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محرر الأكواد للهواتف</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 10px;
            direction: rtl;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 15px 0;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        header h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            color: #4cc9f0;
        }
        
        header p {
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .file-config {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .config-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .config-item label {
            color: #4cc9f0;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .config-item input, .config-item select {
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 1rem;
        }
        
        .config-item input:focus, .config-item select:focus {
            outline: none;
            border-color: #4cc9f0;
        }
        
        .editor-container {
            margin-bottom: 15px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .editor-header {
            background-color: #0f3460;
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .editor-header span {
            font-weight: bold;
            color: white;
        }
        
        .editor-header .language-badge {
            background-color: #4cc9f0;
            color: #16213e;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .code-editor {
            width: 100%;
            min-height: 300px;
            background-color: #1e1e2e;
            color: #f8f8f2;
            padding: 15px;
            border: none;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            line-height: 1.5;
            resize: vertical;
            direction: ltr;
            text-align: left;
        }
        
        .code-editor:focus {
            outline: none;
        }
        
        .actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background-color: #4cc9f0;
            color: #16213e;
        }
        
        .btn-primary:hover {
            background-color: #3aa8cc;
        }
        
        .btn-secondary {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .footer {
            text-align: center;
            color: #aaa;
            font-size: 0.8rem;
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 10px;
        }
        
        .file-name-display {
            color: #4cc9f0;
            font-weight: bold;
            background-color: rgba(76, 201, 240, 0.1);
            padding: 5px 10px;
            border-radius: 5px;
            margin-top: 5px;
            display: inline-block;
        }
        
        /* تعليمات Syntax highlighting بسيطة */
        .html-tag { color: #ff79c6; }
        .css-selector { color: #8be9fd; }
        .css-property { color: #50fa7b; }
        .js-keyword { color: #ff79c6; }
        .js-function { color: #50fa7b; }
        .js-string { color: #f1fa8c; }
        
        @media (min-width: 768px) {
            .container {
                max-width: 700px;
            }
            
            .file-config {
                flex-direction: row;
                justify-content: space-between;
            }
            
            .config-item {
                flex: 1;
            }
            
            .code-editor {
                min-height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-code"></i> محرر الأكواد للهواتف</h1>
            <p>أنشئ، عدّل واحفظ ملفاتك البرمجية بسهولة</p>
        </header>
        
        <div class="file-config">
            <div class="config-item">
                <label for="filename"><i class="fas fa-file"></i> اسم الملف</label>
                <input type="text" id="filename" placeholder="مثال: index.html" value="index.html">
            </div>
            
            <div class="config-item">
                <label for="language"><i class="fas fa-language"></i> لغة البرمجة</label>
                <select id="language">
                    <option value="html">HTML</option>
                    <option value="css">CSS</option>
                    <option value="javascript">JavaScript</option>
                    <option value="python">Python</option>
                    <option value="php">PHP</option>
                    <option value="java">Java</option>
                    <option value="cpp">C++</option>
                </select>
            </div>
        </div>
        
        <div class="editor-container">
            <div class="editor-header">
                <span><i class="fas fa-edit"></i> محرر الأكواد</span>
                <div class="language-badge">HTML</div>
            </div>
            <textarea id="codeEditor" class="code-editor" placeholder="اكتب الكود هنا...">&lt;!DOCTYPE html&gt;
&lt;html lang="ar" dir="rtl"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;مثال على HTML&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            text-align: center;
            padding: 50px;
        }
        h1 {
            color: #4a6fa5;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;مرحباً بالعالم!&lt;/h1&gt;
    &lt;p&gt;هذا مثال على صفحة HTML&lt;/p&gt;
    &lt;script&gt;
        document.addEventListener('DOMContentLoaded', function() {
            console.log('الصفحة جاهزة!');
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea>
        </div>
        
        <div class="actions">
            <button id="saveBtn" class="btn btn-primary">
                <i class="fas fa-save"></i> حفظ الملف
            </button>
            <button id="clearBtn" class="btn btn-secondary">
                <i class="fas fa-broom"></i> مسح المحرر
            </button>
        </div>
        
        <div class="footer">
            <p>الملف المحفوظ: <span id="savedFileName" class="file-name-display">لم يتم حفظ أي ملف بعد</span></p>
            <p>محرر الأكواد يعمل على جميع أحجام الشاشات | تم التطوير باستخدام HTML5 و JavaScript</p>
        </div>
    </div>

    <script>
        // عناصر DOM
        const filenameInput = document.getElementById('filename');
        const languageSelect = document.getElementById('language');
        const codeEditor = document.getElementById('codeEditor');
        const saveBtn = document.getElementById('saveBtn');
        const clearBtn = document.getElementById('clearBtn');
        const languageBadge = document.querySelector('.language-badge');
        const savedFileName = document.getElementById('savedFileName');
        
        // أمثلة أكواد مبدئية لكل لغة
        const codeExamples = {
            html: `<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مثال على HTML</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            text-align: center;
            padding: 50px;
        }
        h1 {
            color: #4a6fa5;
        }
    </style>
</head>
<body>
    <h1>مرحباً بالعالم!</h1>
    <p>هذا مثال على صفحة HTML</p>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('الصفحة جاهزة!');
        });
    <\/script>
</body>
</html>`,
            
            css: `/* مثال على كود CSS */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    color: white;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.header {
    text-align: center;
    margin-bottom: 40px;
}

.button {
    background-color: #4cc9f0;
    color: #16213e;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
}

.button:hover {
    background-color: #3aa8cc;
    transform: translateY(-2px);
}`,
            
            javascript: `// مثال على كود JavaScript
// دالة للترحيب بالمستخدم
function greetUser(name) {
    return \`مرحباً، \${name}! أهلاً بك في محرر الأكواد.\`;
}

// دالة لجمع رقمين
function addNumbers(a, b) {
    return a + b;
}

// دالة للتحقق من رقم زوجي
function isEven(number) {
    return number % 2 === 0;
}

// مثال على استخدام الدوال
const userName = "أحمد";
const greeting = greetUser(userName);
console.log(greeting);

const sum = addNumbers(5, 7);
console.log(\`مجموع 5 و 7 هو: \${sum}\`);

console.log(\`الرقم 10 \${isEven(10) ? 'زوجي' : 'فردي'}\`);
console.log(\`الرقم 7 \${isEven(7) ? 'زوجي' : 'فردي'}\`);

// مثال على مصفوفة و map
const numbers = [1, 2, 3, 4, 5];
const squaredNumbers = numbers.map(num => num * num);
console.log(\`الأرقام المربعة: \${squaredNumbers}\`);`,
            
            python: `# مثال على كود Python
# دالة للترحيب بالمستخدم
def greet_user(name):
    return f"مرحباً، {name}! أهلاً بك في محرر الأكواد."

# دالة لجمع رقمين
def add_numbers(a, b):
    return a + b

# دالة للتحقق من رقم زوجي
def is_even(number):
    return number % 2 == 0

# دالة لحساب العامل الرياضي
def factorial(n):
    if n == 0:
        return 1
    else:
        return n * factorial(n-1)

# مثال على استخدام الدوال
if __name__ == "__main__":
    user_name = "أحمد"
    greeting = greet_user(user_name)
    print(greeting)
    
    total = add_numbers(5, 7)
    print(f"مجموع 5 و 7 هو: {total}")
    
    print(f"الرقم 10 {'زوجي' if is_even(10) else 'فردي'}")
    print(f"الرقم 7 {'زوجي' if is_even(7) else 'فردي'}")
    
    # حساب العامل الرياضي للرقم 5
    fact_5 = factorial(5)
    print(f"العامل الرياضي لـ 5 هو: {fact_5}")`,
            
            php: `<?php
// مثال على كود PHP
// دالة للترحيب بالمستخدم
function greetUser($name) {
    return "مرحباً، $name! أهلاً بك في محرر الأكواد.";
}

// دالة لجمع رقمين
function addNumbers($a, $b) {
    return $a + $b;
}

// دالة للتحقق من رقم زوجي
function isEven($number) {
    return $number % 2 == 0;
}

// مثال على استخدام الدوال
$userName = "أحمد";
$greeting = greetUser($userName);
echo $greeting . "<br>";

$sum = addNumbers(5, 7);
echo "مجموع 5 و 7 هو: $sum <br>";

echo "الرقم 10 " . (isEven(10) ? 'زوجي' : 'فردي') . "<br>";
echo "الرقم 7 " . (isEven(7) ? 'زوجي' : 'فردي') . "<br>";

// مثال على مصفوفة
$numbers = [1, 2, 3, 4, 5];
echo "الأرقام: " . implode(", ", $numbers) . "<br>";

// حساب مجموع الأرقام
$total = array_sum($numbers);
echo "مجموع الأرقام: $total <br>";
?>`,
            
            java: `// مثال على كود Java
public class Main {
    // دالة للترحيب بالمستخدم
    public static String greetUser(String name) {
        return "مرحباً، " + name + "! أهلاً بك في محرر الأكواد.";
    }
    
    // دالة لجمع رقمين
    public static int addNumbers(int a, int b) {
        return a + b;
    }
    
    // دالة للتحقق من رقم زوجي
    public static boolean isEven(int number) {
        return number % 2 == 0;
    }
    
    // دالة لحساب العامل الرياضي
    public static int factorial(int n) {
        if (n == 0) {
            return 1;
        } else {
            return n * factorial(n - 1);
        }
    }
    
    public static void main(String[] args) {
        String userName = "أحمد";
        String greeting = greetUser(userName);
        System.out.println(greeting);
        
        int sum = addNumbers(5, 7);
        System.out.println("مجموع 5 و 7 هو: " + sum);
        
        System.out.println("الرقم 10 " + (isEven(10) ? "زوجي" : "فردي"));
        System.out.println("الرقم 7 " + (isEven(7) ? "زوجي" : "فردي"));
        
        // حساب العامل الرياضي للرقم 5
        int fact5 = factorial(5);
        System.out.println("العامل الرياضي لـ 5 هو: " + fact5);
    }
}`,
            
            cpp: `// مثال على كود C++
#include <iostream>
#include <string>
using namespace std;

// دالة للترحيب بالمستخدم
string greetUser(string name) {
    return "مرحباً، " + name + "! أهلاً بك في محرر الأكواد.";
}

// دالة لجمع رقمين
int addNumbers(int a, int b) {
    return a + b;
}

// دالة للتحقق من رقم زوجي
bool isEven(int number) {
    return number % 2 == 0;
}

// دالة لحساب العامل الرياضي
int factorial(int n) {
    if (n == 0) {
        return 1;
    } else {
        return n * factorial(n - 1);
    }
}

int main() {
    string userName = "أحمد";
    string greeting = greetUser(userName);
    cout << greeting << endl;
    
    int sum = addNumbers(5, 7);
    cout << "مجموع 5 و 7 هو: " << sum << endl;
    
    cout << "الرقم 10 " << (isEven(10) ? "زوجي" : "فردي") << endl;
    cout << "الرقم 7 " << (isEven(7) ? "زوجي" : "فردي") << endl;
    
    // حساب العامل الرياضي للرقم 5
    int fact5 = factorial(5);
    cout << "العامل الرياضي لـ 5 هو: " << fact5 << endl;
    
    return 0;
}`
        };
        
        // امتدادات الملفات لكل لغة
        const fileExtensions = {
            html: '.html',
            css: '.css',
            javascript: '.js',
            python: '.py',
            php: '.php',
            java: '.java',
            cpp: '.cpp'
        };
        
        // تحديث واجهة المحرر عند تغيير اللغة
        languageSelect.addEventListener('change', function() {
            const selectedLanguage = this.value;
            languageBadge.textContent = this.options[this.selectedIndex].text;
            codeEditor.value = codeExamples[selectedLanguage] || '';
            
            // تحديث اسم الملف بناءً على اللغة المختارة
            const currentFilename = filenameInput.value;
            const baseName = currentFilename.split('.')[0];
            filenameInput.value = baseName + fileExtensions[selectedLanguage];
        });
        
        // تحديث اسم الملف يدوياً
        filenameInput.addEventListener('input', function() {
            savedFileName.textContent = `لم يتم حفظ الملف بعد: ${this.value}`;
        });
        
        // مسح المحرر
        clearBtn.addEventListener('click', function() {
            if (confirm("هل أنت متأكد من مسح المحرر؟ سيتم حذف جميع الأكواد الحالية.")) {
                codeEditor.value = '';
                savedFileName.textContent = 'لم يتم حفظ أي ملف بعد';
            }
        });
        
        // حفظ الملف
        saveBtn.addEventListener('click', function() {
            const filename = filenameInput.value.trim();
            const codeContent = codeEditor.value.trim();
            const language = languageSelect.value;
            
            if (!filename) {
                alert('الرجاء إدخال اسم الملف أولاً');
                filenameInput.focus();
                return;
            }
            
            if (!codeContent) {
                alert('الرجاء كتابة بعض الأكواد أولاً');
                codeEditor.focus();
                return;
            }
            
            // إضافة الامتداد إذا لم يكن موجوداً
            let finalFilename = filename;
            const extension = fileExtensions[language];
            if (!finalFilename.endsWith(extension)) {
                finalFilename += extension;
                filenameInput.value = finalFilename;
            }
            
            // تحديد نوع MIME بناءً على اللغة
            const mimeTypes = {
                html: 'text/html',
                css: 'text/css',
                javascript: 'application/javascript',
                python: 'text/x-python',
                php: 'application/x-httpd-php',
                java: 'text/x-java-source',
                cpp: 'text/x-c++src'
            };
            
            const mimeType = mimeTypes[language] || 'text/plain';
            
            // إنشاء Blob وتحويله لرابط قابل للتحميل
            const blob = new Blob([codeContent], { type: mimeType });
            const url = URL.createObjectURL(blob);
            
            // إنشاء عنصر <a> للتحميل
            const downloadLink = document.createElement('a');
            downloadLink.href = url;
            downloadLink.download = finalFilename;
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
            
            // تحرير الموارد
            URL.revokeObjectURL(url);
            
            // تحديث واجهة المستخدم
            savedFileName.textContent = `تم حفظ: ${finalFilename}`;
            
            // إظهار رسالة نجاح
            alert(`تم حفظ الملف "${finalFilename}" بنجاح!\nسيبدأ التحميل الآن.`);
        });
        
        // تهيئة المحرر عند التحميل
        window.addEventListener('DOMContentLoaded', function() {
            // تعيين المحتوى الافتراضي
            codeEditor.value = codeExamples.html;
            savedFileName.textContent = 'لم يتم حفظ أي ملف بعد';
            
            // ضبط حجم المحرر تلقائياً
            codeEditor.style.height = 'auto';
            codeEditor.style.height = (codeEditor.scrollHeight) + 'px';
        });
        
        // ضبط حجم المحرر تلقائياً أثناء الكتابة
        codeEditor.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });
    </script>
</body>
</html>
